<template>
  <!-- <Suspense>
    <template #default>
      <TestSub />
    </template>
    <template #fallback> Loading ... </template>
  </Suspense> -->
  <div class="toggle-show">
    <a-button @click="toggleShow">åˆ‡æ¢ç»„ä»¶æ˜¾ç¤º</a-button>
    <TestSub v-if="show" />
  </div>
</template>
<script lang="ts" setup>
  import { defineComponent, defineAsyncComponent, ref } from 'vue';

  // const TestSub = defineAsyncComponent(() => import('./TestSub.vue'))

  // import ErrorComponent form './ErrorComponent.vue';
  // import LoadingComponent form './LoadingComponent.vue';

  // å¸¦é€‰é¡¹çš„å¼‚æ­¥ç»„ä»¶
  const TestSub = defineAsyncComponent({
    loader: () => import('./TestSub.vue'),
    delay: 60000,
    timeout: 70000,
    // errorComponent: ErrorComponent,
    // loadingComponent: LoadingComponent
  });

  let show = ref(false);

  function toggleShow() {
    // show = !show;
    show.value = !show.value; // è¿™é‡Œéœ€è¦æ³¨æ„ç»™showèµ‹å€¼çš„æ–¹å¼
    console.log(`ğŸš€ ~ toggleShow ~ show`, show);
  }

  defineExpose({
    show,
  });

  // export default defineComponent({
  //   name: 'TestAsync',
  //   components: {
  //     TestSub: defineAsyncComponent(
  //       () =>
  //         // å¼‚æ­¥å¼•å…¥ç»„ä»¶
  //         import('./TestSub.vue')
  //     ),
  //   },
  // });
</script>
